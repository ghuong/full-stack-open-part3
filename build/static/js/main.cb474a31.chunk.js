(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(14),a=t.n(c),o=t(3),i=t(0),u=function(e){var n=e.filter,t=e.handleFilterChange;return Object(i.jsxs)("div",{children:["Filter: ",Object(i.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.handleAddPerson,t=e.newName,r=e.newNumber,c=e.handleNameChange,a=e.handleNumberChange;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Add a New"}),Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["Name: ",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["Number: ",Object(i.jsx)("input",{value:r,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Add"})})]})]})},s=function(e){var n=e.person,t=e.handleDelete,r=n.name,c=n.number;return Object(i.jsxs)("li",{children:[r," - ",c,Object(i.jsx)("button",{onClick:t,children:"Delete"})]})},l=function(e){var n=e.persons,t=e.handleDeletePerson;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("ul",{children:n.map((function(e){return Object(i.jsx)(s,{person:e,handleDelete:function(){return t(e)}},e.id)}))})]})},j=function(e){var n=e.message,t=e.isError;if(null===n)return null;var r={color:void 0!==t&&t?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(i.jsx)("div",{style:r,children:n})},b=t(4),h=t.n(b),f="/api/persons",m={getAll:function(){return h.a.get(f).then((function(e){return e.data}))},create:function(e){return h.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return h.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return h.a.delete("".concat(f,"/").concat(e))}},O=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),s=Object(o.a)(a,2),b=s[0],h=s[1],f=Object(r.useState)(""),O=Object(o.a)(f,2),v=O[0],p=O[1],g=Object(r.useState)(""),x=Object(o.a)(g,2),w=x[0],C=x[1],N=Object(r.useState)(null),S=Object(o.a)(N,2),k=S[0],D=S[1],y=Object(r.useState)(null),A=Object(o.a)(y,2),P=A[0],E=A[1];Object(r.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]);var L=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r=function(n){n(e),setTimeout((function(){return n(null)}),t)};r(n?E:D)},F=w?t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})):t;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(j,{message:k}),Object(i.jsx)(j,{message:P,isError:!0}),Object(i.jsx)(u,{filter:w,handleFilterChange:function(e){return C(e.target.value)}}),Object(i.jsx)(d,{handleAddPerson:function(e){e.preventDefault();var n={name:b,number:v},r=t.find((function(e){return e.name.toLowerCase()===b.toLowerCase()}));r?window.confirm("".concat(b," is already added to the phonebook, replace the old number with a new one?"))&&m.update(r.id,n).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),L("Updated ".concat(e.name,"'s number"))})).catch((function(e){L("Information of ".concat(r.name," has already been removed from server"),!0),c(t.filter((function(e){return e.id!==r.id})))})):m.create(n).then((function(e){c(t.concat(e)),L("Added ".concat(e.name))})),h(""),p("")},newName:b,newNumber:v,handleNameChange:function(e){return h(e.target.value)},handleNumberChange:function(e){return p(e.target.value)}}),Object(i.jsx)(l,{persons:F,handleDeletePerson:function(e){window.confirm("Delete ".concat(e.name," ?"))&&m.remove(e.id).then((function(n){c(t.filter((function(n){return n.id!==e.id}))),L("Deleted ".concat(e.name))}))}})]})};t(38);a.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.cb474a31.chunk.js.map